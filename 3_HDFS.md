# HDFS : 하둡 분산 파일시스템

## contents📝<a id="contents"></a>

* 1_HDFS의 설계[👉🏻](#1)
* 2_HDFS의 개념[👉🏻](#2)

## 1_HDFS의 설계[📝](#contents)<a id="1"></a>

**하둡 분산<sup>1.</sup> 파일시스템**<sup>HDFS</sup>는 범용 하드웨어로 구성된 클러스터에서 실행되고 데이터 엑세스 패턴을 스트리밍 방식으로 지원하여 매우 커다란 파일들을 저장할수 있도록 설계된 파일시스템입니다.

> 1. 분산 파일 시스템은 하나의 데이터셋이 물리적인 서버의 스토리지 용량을 초과할 때 네트워크로 연결된 서버들의 스토리지를 관리하는 시스템을 말합니다.

1. 매우 커다란 파일

   대규모의 용량을 가진 데이터를 말하는 것으로 하둡 클러스터는 페타바이트의 데이터를 보유하고 있습니다.

2. 데이터 엑세스를 스트리밍 방식으로 지원

   HDFS는 한 번 쓰고 여러 번 읽는 아이디어로 구축되어 전형적인 원본으로 부터 생성되거나 복사되고, 시간이 흐르면서 그 데이터셋으로 다양한 분석을 수행합니다. 대부분의 데이터셋을 포함하여 분석을 진행하고 전체 데이터셋을 읽는 시간은 첫번째 레코드를 읽는데에 걸리는 지연시간보다 더 중요합니다. 

3. 범용 하드웨어

   HDFS는 하드웨어로 인한 장애에도 사용자가 인식할만한 중단 없이 수행할 수 있도록 설계되었습니다. 따라서 신뢰성의 높은 고가의 하드웨어를 사용하지 않아도 괜찮습니다.

## 2_HDFS의 개념[📝](#contents)<a id="2"></a>

### 블록

블록은 한 번에 읽고 쓸 수 있는 데이터의 최대량을 말합니다. HDFS는 일반적인 디스크 블록이 512바이트 정도인과는 달리 64MB와 같이 훨씬 더 커다란 단위를 가집니다. <sup>2.</sup>

> 2. HDFS에서 블록은 탐색 비용을 최소화 하기 위해 디스크 블록에 비해 큽니다. 하나의 블록을 충분히 크게 하면, 디스크로부터 데이터를 전송하는 시간은 그 블록의 시작을 탐색하는 시간보다 훨씬 더 커지게 됩니다. 따라서 다중 블록으로 구성된 큰 파일을 전송하는 시간은 디스크의 전송률에 따라 영향을 받습니다. 

이러한 HDFS의 블록에 대한 추상 개념은 다음과 같은 이점을 갖게 됩니다.

* 파일 하나가 네트워크에 있는 하나의 디스크보다 더 커질 수 있게 됨

  하나의 파일을 구성하는 블록이 동일 디스크에 저장될 필요가 없어서 블록은 클러스터 내에 어떠한 디스크에도 저장될 수 있습니다. 사실 특별한 상황에서는 클러스터에 있는 모든 디스크가 가득 채워질 정도의 블록으로 구성된 파일을 HDFS 클러스터에 저장하는 것도 가능합니다.

* 파일보다 블록을 사용하는 것이 스토리지의 서브시스템을 단순하게 만듦

   단순화는 모든 시스템에서 추구하는 방향이지만 특히 분산시스템에서는 더더욱 중요합니다. 스토리지 서브시스템은 블록을 처리하게 되는데 그것은 스토리지 관리를 단순화 시키고, 메타데이터 관리에 대한 고민으로부터 해방시켜줍니다. 

* 내고장성<sup>fault tolerance</sup>과 가용성<sup>availablity</sup>을 제공하기 위한 복제를 효율적으로 수행 가능

  손상된 블록과 디스크/서버 장애에 대응하기 위해서 각 블록은 물리적으로 분리 된 몇 개의 서버(일반적으로 3개)로 복제됩니다. 만일 하나의 블록을 이용할수 없게 되면, 클라이언트에는 투명한 방식으로 하나의 복사본이 또 다른 위치에 읽혀질 수 있습니다. 복제 계수<sup>replication factor</sup>가 정상 수준으로 다시금 되돌아오게 하기 위하여 손상 또는 서버 장애로 더 이상 이용할 수 없는 블록은 또 다른 복사본 의 위치로 부터 다른 살아있는 서버들로 복제될 수 있습니다. 

HDFS의 fsck 명령어는 블록을 관리합니다. 다음 코드는 파일 시스템에 있는 각 파일을 구성하는 블록을 나열하게 합니다.

```shell
% hadoop fsck -files -blocks
```

### 데이터 노드와 네임 노드

 **HDFS 클러스터**는 마스터-워커의 역할을 하나의 마스터 역할을 수행하는 네임노드와 많은 수의 워커의 역할을 수행하는 네임노드로 구성됩니다. 네임노드는 파일시스템에서 네임스페이스를 관리하는 노드로 파일시스템 트리와 그 트리 안에 있는 모든 파일과 디렉터리에 대한 메타 데이터를 유지합니다. 이 정보는 로 
